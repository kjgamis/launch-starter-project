<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Action</title>
    <link rel="stylesheet" href="//assets.adobedtm.com/activation/reactor/coralui/3.17.0/css/coral.css">
  </head>
  <body>
    <h2>Floodlight Tag</h2>
    <form class="coral-Form coral-Form--aligned u-columnLarge">
      <section class="coral-Form-fieldset">
    
        <div class="coral-Form-fieldwrapper">
          <label for="advertiserId" class="coral-Form-fieldlabel" id="label-aligned-textfield-0">Advertiser ID</label>
          <input id="advertiserId" type="text" is="coral-textfield" class="coral-Form-field" placeholder="Enter ID" name="advertiserID"
            labelledby="label-aligned-textfield-0">
        </div>
    
        <div class="coral-Form-fieldwrapper">
          <label for="groupId" class="coral-Form-fieldlabel" id="label-aligned-textfield-0">Group ID</label>
          <input id="groupId" type="text" is="coral-textfield" class="coral-Form-field" placeholder="Enter ID" name="advertiserID"
            labelledby="label-aligned-textfield-0">
        </div>
    
        <div class="coral-Form-fieldwrapper">
          <label for="activityId" class="coral-Form-fieldlabel" id="label-aligned-textfield-0">Activity ID</label>
          <input id="activityId" type="text" is="coral-textfield" class="coral-Form-field" placeholder="Enter ID" name="advertiserID"
            labelledby="label-aligned-textfield-0">
        </div>
    
        <div id='counting-methods' class="coral-Form-fieldwrapper">
          <input type="radio" id="standard" name="counting-method" value="standard" checked='checked'>
          <label for="standard">Standard</label>
    
          <input type="radio" id="unique" name="counting-method" value="unique">
          <label for="unique">Unique</label>
        </div>
      </section>
    </form>

    <script src="https://assets.adobedtm.com/activation/reactor/extensionbridge/extensionbridge.min.js"></script>
    <script>
      window.extensionBridge.register({
        init: function(info) {
          if (info.settings) {
            // TODO Populate form values from persisted settings.
            document.querySelector('#advertiserId').value = info.settings.advertiserId;
            document.querySelector('#groupId').value = info.settings.groupId;
            document.querySelector('#activityId').value = info.settings.activityId;
            document.querySelector('input[name="counting-method"]:checked').value = info.settings.countingMethod;
          } else {
            document.querySelector('#advertiserId').value = '';
            document.querySelector('#groupId').value = '';
            document.querySelector('#activityId').value = '';
          }
        },

        getSettings: function() {
          // TODO Return settings object from form values.
          return {
            advertiserId:   document.querySelector('#advertiserId').value,
            groupId:        document.querySelector('#groupId').value,
            activityId:     document.querySelector('#activityId').value,
            countingMethod: document.querySelector('input[name="counting-method"]:checked').value 
          }
        },

        validate: function() {
          // TODO Return whether settings are valid.
          var valid = false;
          var advertiserId   = document.querySelector('#advertiserId').value;
          var groupId        = document.querySelector('#groupId').value;
          var activityId     = document.querySelector('#activityId').value;
          var countingMethod = document.querySelector('input[name="counting-method"]:checked').value

          if (advertiserId && groupId && activityId) {
            valid = true;
          }

          return valid;
        }
      });
    </script>
  </body>
</html>
